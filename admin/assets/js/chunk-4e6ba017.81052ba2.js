(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e6ba017"],{1148:function(e,t,a){"use strict";var r=a("a691"),n=a("1d80");e.exports="".repeat||function(e){var t=String(n(this)),a="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(a+=t);return a}},"408a":function(e,t,a){var r=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},6088:function(e,t,a){"use strict";var r=a("a1aa"),n=a.n(r);n.a},a1aa:function(e,t,a){},a9a3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-main"},[a("div",{staticClass:"content-header"},[a("searchBtns",{attrs:{reqData:e.reqData,inputBtns:e.inputBtns,pickerOptions:e.pickerOptions,selectedBtns:e.selectedBtns,newBtn:!0,hiddencase:!0},on:{handleChange:e.handleChange,newProject:e.newProject,findProject:e.findProject,restProject:e.restProject}})],1),a("div",{staticClass:"notice-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,width:"100%",size:"medium"}},[a("el-table-column",{attrs:{label:"ID",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{label:"作者",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.author))])]}}])}),a("el-table-column",{attrs:{label:"标题",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{label:"发布时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createtime)))])]}}])}),a("el-table-column",{attrs:{label:"修改时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.updatetime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"230",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")]),a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)}}])})],1),a("el-pagination",{attrs:{"current-page":e.reqData.pageNo,"page-sizes":[10,20,30,40],"page-size":100,layout:"sizes, prev, pager, next",total:e.reqData.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.reqData,"pageNo",t)},"update:current-page":function(t){return e.$set(e.reqData,"pageNo",t)}}})],1),a("el-dialog",{attrs:{title:e.newflag?"新增公告":"公告详情","show-close":"",top:"20px","close-on-press-escape":"",visible:e.dialogVisible,width:"80%",center:""},on:{close:e.closeDialog,"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{disabled:e.disabled,model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公告标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入公告标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发布作者",prop:"author"}},[a("el-input",{attrs:{placeholder:"请输入发布作者"},model:{value:e.ruleForm.author,callback:function(t){e.$set(e.ruleForm,"author",t)},expression:"ruleForm.author"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公告类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公告封面",prop:"cover"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.defaultUrl,"show-file-list":!1,"on-success":e.handleCoverSuccess,"before-upload":e.beforeUploadCover}},[e.ruleForm.cover?a("img",{staticClass:"avatar",attrs:{src:e.ruleForm.cover}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公告视频",prop:"detail"}},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.newflag||!e.disabled,expression:"newflag || !disabled"}],staticClass:"upload-demo",attrs:{drag:"",action:e.defaultUrl,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeUploadVideo}},[a("i",{staticClass:"el-icon-upload"}),e.disabled?a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]):a("div",{staticClass:"el-upload__text"},[e._v(" 修改原视频 "),a("em",[e._v("点击上传")]),e._v("新的视频 ")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传mp4,ogg,flv,avi,wmv,rmvb格式的视频")])]),a("video",{directives:[{name:"show",rawName:"v-show",value:"undefined"!=e.ruleForm.video&&""!=e.ruleForm.video&&null!=e.ruleForm.video&&"null"!=e.ruleForm.video,expression:"ruleForm.video!='undefined'&&ruleForm.video!=''&&ruleForm.video!=null&&ruleForm.video!='null'"}],staticClass:"upload-video",attrs:{controls:"controls",src:e.ruleForm.video}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公告详情",prop:"detail"}},[a("vue-editor",{attrs:{id:"editor",useCustomImageHandler:"",disabled:e.disabled},on:{"image-added":e.handleImageAdded},model:{value:e.ruleForm.detail,callback:function(t){e.$set(e.ruleForm,"detail",t)},expression:"ruleForm.detail"}})],1)],1)],1),a("el-form-item",[e.newflag?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]):a("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdate}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},n=[],i=(a("c975"),a("b680"),a("d3b7"),a("e25e"),a("96cf"),a("ade3")),o=a("ed08"),l=a("b775");function s(e){return Object(l["a"])({url:"/upload",method:"post",data:e})}var c="http://39.106.159.120:8080/admin/api/upload";function u(e){return Object(l["a"])({url:"/save/notice",method:"post",data:e})}function d(e){return Object(l["a"])({url:"/noticelist",method:"post",data:e})}function m(e,t){return Object(l["a"])({url:"/notice/".concat(t),method:"post",data:e})}function p(e,t){return Object(l["a"])({url:"/delete/notice/".concat(t),data:e,method:"post"})}function h(e,t){return Object(l["a"])({url:"/update/notice/".concat(t),data:e,method:"post"})}var f=a("7457"),g=function(){return a.e("chunk-372f0d5a").then(a.bind(null,"a060"))},v={name:"home",data:function(){var e;return{socket:null,videoFlag:!1,videoUploadPercent:0,defaultUrl:"",loading:!1,newflag:!1,disabled:!1,options:[{name:"未发布",value:1},{name:"已发布",value:2}],reqData:(e={title:"",author:"",detail:"",id:""},Object(i["a"])(e,"title",""),Object(i["a"])(e,"createtime",""),Object(i["a"])(e,"pageNo",1),Object(i["a"])(e,"pageSize",10),Object(i["a"])(e,"count",0),e),ruleForm:{title:"",author:"",detail:"",id:"",video:"",type:"",cover:""},rules:{title:[{required:!0,message:"请输入公告名称",trigger:"blur"}],author:[{required:!0,message:"请输入公告作者",trigger:"blur"}],type:[{required:!0,message:"请选择公告类型",trigger:"blur"}],cover:[{required:!0,message:"请上传公告图片",trigger:"blur"}],detail:[{required:!0,message:"请输入公告详情",trigger:"blur"}]},dialogVisible:!1,content:"",pickerOptions:{hidden:!1,shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},inputBtns:[{name:"ID",value:"id",hidden:!1},{name:"标题",value:"title",hidden:!1},{name:"作者",value:"author",hidden:!1}],selectedBtns:[{hidden:!1,name:"标签",value:"tag",data:[{id:0,name:"科技"},{id:1,name:"IT技术"},{id:2,name:"美食"}]}],tableData:[]}},created:function(){this.getNoticeList(),this.defaultUrl=c},methods:{handleAvatarSuccess:function(e,t){console.log(e),console.log(t),this.ruleForm.video=e.data.url,console.log("上传成功,打印文件地址"),console.log(this.ruleForm.video)},handleCoverSuccess:function(e,t){console.log(e),console.log(t),this.ruleForm.cover=e.data.url,console.log("上传成功,打印封面地址"),console.log(this.ruleForm.cover)},beforeUploadCover:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},beforeUploadVideo:function(e){e.size;if(-1==["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb"].indexOf(e.type))return this.$message.error("请上传正确的视频格式"),!1},uploadVideoProcess:function(e,t,a){this.videoFlag=!0,this.videoUploadPercent=t.percentage.toFixed(0)},clearForm:function(){var e;this.reqData.id="",this.reqData.title="",this.reqData.author="",this.reqData.title="",this.reqData.createtime="",this.ruleForm=(e={title:"",author:"",detail:"",id:""},Object(i["a"])(e,"title",""),Object(i["a"])(e,"createtime",""),Object(i["a"])(e,"videoo",""),e)},parseTime:o["a"],handleUpdate:function(){this.updateNotice(this.ruleForm,this.ruleForm.id)},handleSizeChange:function(e){this.reqData.pageSize=e,this.getNoticeList(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.reqData.pageNo=e,this.getNoticeList(),console.log("当前页: ".concat(e))},handleEdit:function(e,t){this.disabled=!1,this.dialogVisible=!0,this.noticeDetail(t.id)},handleDelete:function(e,t){var a=this,r=this;console.log("删除"),this.ruleForm={},this.$confirm("此操作将删除该公告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.deleteNotice(t.id)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},updateNotice:function(e,t){var a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return a=this,r.next=3,regeneratorRuntime.awrap(h(e,t).then((function(e){e.data.success?(a.$message({type:"success",message:e.data.msg}),a.dialogVisible=!1,a.getNoticeList()):a.$message({type:"error",message:e.data.msg})})));case 3:case"end":return r.stop()}}),null,this)},deleteNotice:function(e){var t,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t={id:e},a=this,r.next=4,regeneratorRuntime.awrap(p(t,e).then((function(e){e.data.success?(a.$message({type:"success",message:e.data.msg}),a.getNoticeList()):a.$message({type:"error",message:e.data.msg})})));case 4:case"end":return r.stop()}}),null,this)},noticeDetail:function(e){var t,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t={id:e},a=this,r.next=4,regeneratorRuntime.awrap(m(t,e).then((function(e){e.data.success&&(a.ruleForm=e.data.data,a.ruleForm.createtime=a.parseTime(a.ruleForm.createtime),a.ruleForm.updatetime=a.parseTime(a.ruleForm.updatetime),console.log(a.ruleForm))})));case 4:case"end":return r.stop()}}),null,this)},handleDetail:function(e,t){this.dialogVisible=!0,this.disabled=!0,console.log(t),this.noticeDetail(t.id)},getNoticeList:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.loading=!0,this.reqData.createtime=Object(o["a"])(this.reqData.createtime),t.next=5,regeneratorRuntime.awrap(d(this.reqData).then((function(t){t.data.success?(e.tableData=t.data.list,e.loading=!1,e.reqData.count=parseInt(t.data.pageCount),console.log(e.reqData)):e.$message({type:"success",message:t.data.msg,duration:1500})})).catch((function(){e.loading=!1})));case 5:case"end":return t.stop()}}),null,this)},newNotice:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,regeneratorRuntime.awrap(u(this.ruleForm).then((function(t){console.log(t.data),t.data.success?(e.dialogVisible=!1,e.getNoticeList(),e.$message({type:"success",message:t.data.msg,duration:1500})):e.$message({type:"error",message:t.data.msg,duration:1500})})));case 3:case"end":return t.stop()}}),null,this)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.newNotice()}))},resetForm:function(e){this.$refs[e].resetFields()},handleChange:function(e){console.log("打印子组件传递的"),console.log(e)},newProject:function(){this.clearForm(),this.dialogVisible=!0,this.newflag=!0},findProject:function(){console.log(this.reqData),this.getNoticeList()},restProject:function(){this.clearForm()},closeDialog:function(){this.disabled=!1,this.dialogVisible=!1,this.newflag=!1,this.clearForm(),console.log("调用关闭")},handleImageAdded:function(e,t,a,r){var n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return this,n=new FormData,n.append("file",e),i.next=5,regeneratorRuntime.awrap(s(n).then((function(e){var n=e.data;console.log(n);var i=e.data.url;t.insertEmbed(a,"image",i),r()})));case 5:case"end":return i.stop()}}),null,this)}},components:{VueEditor:f["a"],searchBtns:g}},b=v,w=(a("6088"),a("2877")),F=Object(w["a"])(b,r,n,!1,null,"448239b8",null);t["default"]=F.exports},ade3:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return r}))},b680:function(e,t,a){"use strict";var r=a("23e7"),n=a("a691"),i=a("408a"),o=a("1148"),l=a("d039"),s=1..toFixed,c=Math.floor,u=function(e,t,a){return 0===t?a:t%2===1?u(e,t-1,a*e):u(e*e,t/2,a)},d=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},m=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){s.call({})}));r({target:"Number",proto:!0,forced:m},{toFixed:function(e){var t,a,r,l,s=i(this),m=n(e),p=[0,0,0,0,0,0],h="",f="0",g=function(e,t){var a=-1,r=t;while(++a<6)r+=e*p[a],p[a]=r%1e7,r=c(r/1e7)},v=function(e){var t=6,a=0;while(--t>=0)a+=p[t],p[t]=c(a/e),a=a%e*1e7},b=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==p[e]){var a=String(p[e]);t=""===t?a:t+o.call("0",7-a.length)+a}return t};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(h="-",s=-s),s>1e-21)if(t=d(s*u(2,69,1))-69,a=t<0?s*u(2,-t,1):s/u(2,t,1),a*=4503599627370496,t=52-t,t>0){g(0,a),r=m;while(r>=7)g(1e7,0),r-=7;g(u(10,r,1),0),r=t-1;while(r>=23)v(1<<23),r-=23;v(1<<r),g(1,1),v(2),f=b()}else g(0,a),g(1<<-t,0),f=b()+o.call("0",m);return m>0?(l=f.length,f=h+(l<=m?"0."+o.call("0",m-l)+f:f.slice(0,l-m)+"."+f.slice(l-m))):f=h+f,f}})}}]);
//# sourceMappingURL=chunk-4e6ba017.81052ba2.js.map