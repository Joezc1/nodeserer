(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e33c6396"],{1713:function(e,t,r){"use strict";var a=r("8ad0"),s=r.n(a);s.a},"8ad0":function(e,t,r){},"91b6":function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return l}));var a=r("b775");function s(e){return Object(a["a"])({url:"/upload",method:"post",data:e})}var l="http://39.106.159.120:8080/admin/api/upload"},d24d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("div",{staticClass:"topic-header"},[r("el-drawer",{attrs:{"with-header":!1,visible:e.drawer,direction:"rtl","before-close":e.handleClose,size:"20%"},on:{"update:visible":function(t){e.drawer=t}}},[r("div",{staticClass:"drawer-main"},[r("div",{staticClass:"drawer-header clearfix"},[r("div",{staticClass:"drawer-left"},[r("i",{staticClass:"el-icon-warning-outline"}),r("div",{staticClass:"drawer-title"},[e._v("搜索用户")])]),r("div",{staticClass:"drawer-right"},[r("i",{staticClass:"el-icon-close",on:{click:function(t){e.drawer=!1}}})])]),r("div",{staticClass:"drawer-input"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("div",{staticClass:"drawer-label"},[e._v("标题:")])]),r("el-col",{attrs:{span:17}},[r("el-input",{model:{value:e.reqData.title,callback:function(t){e.$set(e.reqData,"title",t)},expression:"reqData.title"}})],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"btns"},[r("el-button",{attrs:{size:"small",type:"primary",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.restReqdata(t)}}},[e._v("重置")]),r("el-button",{attrs:{size:"small",type:"primary",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.getList(t)}}},[e._v("搜索")])],1)])],1)],1)])]),r("el-row",[r("el-col",{attrs:{span:1}},[r("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.getList}})],1),r("el-col",{attrs:{offset:20,span:1}},[r("el-button",{staticClass:"newbtn",attrs:{size:"small",type:"success",icon:"el-icon-plus"},on:{click:e.newProject}})],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{data:e.tableData,size:"small"}},[r("el-table-column",{attrs:{label:"用户ID",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.id))])]}}])}),r("el-table-column",{attrs:{label:"用户名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.username))])]}}])}),r("el-table-column",{attrs:{label:"用户等级",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.switchLevel(t.row.level)))])]}}])}),r("el-table-column",{attrs:{label:"Email",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.email))])]}}])}),r("el-table-column",{attrs:{label:"Tel",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.tel))])]}}])}),r("el-table-column",{attrs:{label:"操作",fixed:"right",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{staticClass:"btns"},[r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-view"},on:{click:function(r){return e.handleDetail(t.row)}}}),r("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(r){return e.handleEdit(t.row)}}}),r("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(r){return e.handleDelete(t.row)}}})],1)}}])})],1),r("el-pagination",{attrs:{"current-page":e.reqData.pageNo,"page-sizes":[10,20,30,40],"page-size":100,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.reqData,"pageNo",t)},"update:current-page":function(t){return e.$set(e.reqData,"pageNo",t)}}}),r("el-dialog",{attrs:{title:"编辑用户信息","show-close":"",top:"20px","close-on-press-escape":"",visible:e.dialogVisible,width:"60%",center:""},on:{close:e.closeDialog,"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{disabled:e.disabled,model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入用户密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户等级",prop:"level"}},[r("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,"level",t)},expression:"ruleForm.level"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户邮箱号",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入用户邮箱"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户手机号",prop:"tel"}},[r("el-input",{attrs:{placeholder:"请输入用户手机号"},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1)],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}]},[e.newflag?r("el-button",{attrs:{type:"primary"},on:{click:e.saveRole}},[e._v("新建")]):r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},s=[],l=(r("d3b7"),r("e25e"),r("159b"),r("96cf"),r("91b6")),n=r("ed08"),i=r("b775");function o(e){return Object(i["a"])({url:"/role/list",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/role/".concat(e),method:"post",data:{}})}function c(e){return Object(i["a"])({url:"/save/role",method:"post",data:e})}function d(e,t){return Object(i["a"])({url:"/update/role/".concat(t),method:"post",data:e})}function m(e){return Object(i["a"])({url:"/delete/role/".concat(e),method:"post",data:{}})}var h={name:"home",data:function(){return{newflag:!1,drawer:!1,loading:!1,tableData:[],total:0,reqData:{pageSize:10,pageNo:1,username:""},disabled:!1,dialogVisible:!1,defaultUrl:"",ruleForm:{username:"",level:"",tel:"",email:"",password:""},rules:{username:[{required:!0,message:"请输入用户账号",trigger:"change"}],password:[{required:!0,message:"请输入账号密码",trigger:"change"}],level:[{required:!0,message:"请选择用户等级",trigger:"change"}],tel:[{required:!0,message:"请输入手机号",trigger:"change"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}]},options:[{name:"普通管理员",value:1},{name:"超级管理员",value:2}]}},methods:{openDrawer:function(){this.drawer=!0},handleClose:function(e){e()},handleSearch:function(){this.getList,this.drawer=!0},refeshForm:function(){this.restReqdata()},switchLevel:function(e){switch(e){case 1:return"普通管理员";default:return"超级管理员"}},handleSizeChange:function(e){this.reqData.pageSize=e},newProject:function(){this.dialogVisible=!0,this.disabled=!1,this.newflag=!0,this.ruleForm={username:"",level:"",tel:"",email:"",password:""}},searchReqdata:function(){this.getList()},restReqdata:function(){this.reqData={pageSize:10,pageNo:1,username:""}},parseTime:n["a"],handleCurrentChange:function(e){this.reqData.pageNo=e,this.getList()},delete:function(e){var t=this;t.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m(e).then((function(e){var r=e.data;t.getList(),t.$message.success(r.msg)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getList:function(){var e,t=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=this,this.loading=!0,r.next=4,regeneratorRuntime.awrap(o(this.reqData).then((function(r){var a=r.data;e.tableData=a.list,e.tableData.forEach((function(t,r,a){a[r].isshelves=e.switchisshelves(a[r].isshelves)})),e.total=parseInt(a.pageCount),t.loading=!1})));case 4:case"end":return r.stop()}}),null,this)},saveRole:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,regeneratorRuntime.awrap(c(this.ruleForm).then((function(t){console.log("打印res"),console.log(t),t.data.success?(e.$message({type:"success",msg:"新建成功"}),e.dialogVisible=!1,e.getList()):e.$message({type:"error",msg:"新建失败请重试"})})));case 3:case"end":return t.stop()}}),null,this)},update:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,console.log(this.ruleForm),this.ruleForm.isshelves,this.ruleForm.id==this.$store.getters.userid&&(this.$store.commit("SET_NAME",this.ruleForm.username),this.$store.commit("SET_LEVEL",this.ruleForm.level),sessionStorage.setItem("username",this.ruleForm.username),sessionStorage.setItem("level",this.ruleForm.level)),t.next=6,regeneratorRuntime.awrap(d(this.ruleForm,this.ruleForm.id).then((function(t){var r=t.data;r.success&&(e.getList(),e.$message.success(r.msg),e.dialogVisible=!1)})));case 6:case"end":return t.stop()}}),null,this)},getDetail:function(e){var t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t=this,r.next=3,regeneratorRuntime.awrap(u(e).then((function(e){t.ruleForm=e.data.data,t.ruleForm.createtime=Object(n["a"])(t.ruleForm.createtime),t.ruleForm.updatetime=Object(n["a"])(t.ruleForm.updatetime),t.ruleForm.isshelves=t.switchisshelves(t.ruleForm.isshelves),console.log("获取成功"),console.log(t.ruleForm)})));case 3:case"end":return r.stop()}}),null,this)},switchisshelves:function(e){switch(e){case"true":return!0;case"false":return!1}},switchistype:function(e){switch(parseInt(e)){case 1:return"教研组";case 2:return"名师队伍"}},handleDetail:function(e){this.disabled=!0,this.dialogVisible=!0;var t=this;t.getDetail(e.id)},handleDelete:function(e){this.delete(e.id)},handleEdit:function(e){this.newflag=!1,this.getDetail(e.id),this.disabled=!1,this.dialogVisible=!0},closeDialog:function(){this.resetForm("ruleForm")},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.update()}))},resetForm:function(e){this.$refs[e].resetFields()},handleCoverSuccess:function(e,t){console.log(e),console.log(t),this.ruleForm.cover=e.data.url,console.log("上传成功,打印封面地址"),console.log(this.ruleForm.cover)},beforeUploadCover:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},handleImageAdded:function(e,t,r,a){var s;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return this,s=new FormData,s.append("file",e),n.next=5,regeneratorRuntime.awrap(l["b"](s).then((function(e){var s=e.data;console.log(s);var l=e.data.url;t.insertEmbed(r,"image",l),a()})));case 5:case"end":return n.stop()}}),null,this)}},mounted:function(){this.defaultUrl=l["a"],this.getList()},components:{}},p=h,f=(r("1713"),r("2877")),g=Object(f["a"])(p,a,s,!1,null,"0d872f21",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-e33c6396.617327fb.js.map