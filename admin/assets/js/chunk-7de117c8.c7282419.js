(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7de117c8"],{"39df":function(e,t,a){},"75e0":function(e,t,a){"use strict";var r=a("39df"),n=a.n(r);n.a},ee55:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topic-main"},[a("div",{staticClass:"topic-header"},[a("el-drawer",{attrs:{"with-header":!1,visible:e.drawer,direction:"rtl","before-close":e.handleClose,size:"20%"},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"drawer-main"},[a("div",{staticClass:"drawer-header clearfix"},[a("div",{staticClass:"drawer-left"},[a("i",{staticClass:"el-icon-warning-outline"}),a("div",{staticClass:"drawer-title"},[e._v("搜索用户")])]),a("div",{staticClass:"drawer-right"},[a("i",{staticClass:"el-icon-close",on:{click:function(t){e.drawer=!1}}})])]),a("div",{staticClass:"drawer-input"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"drawer-label"},[e._v("UID:")])]),a("el-col",{attrs:{span:17}},[a("el-input",{model:{value:e.reqData.userid,callback:function(t){e.$set(e.reqData,"userid",t)},expression:"reqData.userid"}})],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"drawer-label"},[e._v("昵称:")])]),a("el-col",{attrs:{span:17}},[a("el-input",{model:{value:e.reqData.nickname,callback:function(t){e.$set(e.reqData,"nickname",t)},expression:"reqData.nickname"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.refeshForm(t)}}},[e._v("重置")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.getUsers(t)}}},[e._v("搜索")])],1)])],1)],1)])]),a("el-row",[a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.getUsers}})],1),a("el-col",{attrs:{span:1,offset:21}},[a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-search"},on:{click:e.openDrawer}})],1)],1)],1),a("div",{staticClass:"topic-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{label:"UID",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.userid))])]}}])}),a("el-table-column",{attrs:{label:"UserName",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.nickname))])]}}])}),a("el-table-column",{attrs:{label:"Cover",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-avatar",{attrs:{src:e.row.cover}})]}}])}),a("el-table-column",{attrs:{label:"Sex",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("switchSex")(t.row.sex)))])]}}])}),a("el-table-column",{attrs:{label:"Birthday",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.birthday,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"Grade",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseNull(t.row.grade)))])]}}])}),a("el-table-column",{attrs:{label:"是否已完善信息",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.switchComplete(t.row.iscomplete)))])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-view"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}}),a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)}}])})],1),a("el-dialog",{attrs:{title:e.disabled?"用户详情":"编辑用户","show-close":"",top:"20px","close-on-press-escape":"",visible:e.dialogVisible,width:"60%",center:""},on:{close:e.closeDialog,"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{disabled:e.disabled,model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"UID",prop:"userid"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.userid,callback:function(t){e.$set(e.ruleForm,"userid",t)},expression:"ruleForm.userid"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"昵称",disabled:"",prop:"nickname"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.nickname,callback:function(t){e.$set(e.ruleForm,"nickname",t)},expression:"ruleForm.nickname"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"年级"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:e.ruleForm.grade,callback:function(t){e.$set(e.ruleForm,"grade",t)},expression:"ruleForm.grade"}},e._l(e.grades,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate("ruleForm")}}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),a("el-pagination",{attrs:{"current-page":e.reqData.pageNo,"page-sizes":[10,20,30,40],"page-size":100,layout:"sizes, prev, pager, next",total:e.reqData.pageCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.reqData,"pageNo",t)},"update:current-page":function(t){return e.$set(e.reqData,"pageNo",t)}}})],1)])},n=[],l=(a("d3b7"),a("e25e"),a("96cf"),a("ed08")),s=a("7457"),o=a("b775");function i(e){return Object(o["a"])({url:"/wx/user/list",data:e,method:"POST"})}function c(e){return Object(o["a"])({url:"/user/".concat(e),data:{},method:"post"})}function u(e){return Object(o["a"])({url:"/delete/user/".concat(e),data:{},method:"post"})}function d(e,t){return Object(o["a"])({url:"/update/user/".concat(t),data:e,method:"post"})}var p=void 0,m={name:"home",data:function(){return{drawer:!1,topicid:"",disabled:!1,dialogVisible:!1,loading:!1,ruleForm:{id:"",title:"",abstract:"",userid:"",comment:"",follow:"",agree:"",heat:"",brower:"",topic:"",topiccover:"",grade:""},rules:{},reqData:{pageNo:1,pageSize:10,pageCount:1,userid:"",nickname:""},tableData:[],options:[{name:"男",value:0},{name:"女",value:1}],grades:[{name:"大一",value:1},{name:"大二",value:2},{name:"大三",value:3},{name:"大四",value:4},{name:"其他",value:5}]}},computed:{total:{get:function(){return p.reqData.total},set:function(e){p.reqData.total=e}}},filters:{switchSex:function(e){switch(e){case 0:return"男";default:return"女"}}},methods:{openDrawer:function(){this.drawer=!0},handleClose:function(e){e()},handleSearch:function(){this.getTopics(),this.drawer=!0},refeshForm:function(){this.reqData={pageNo:1,pageSize:10,pageCount:1,userid:"",nickname:""}},switchComplete:function(e){switch(e){case 0:return"尚未完善";default:return"已经完善"}},parseNull:function(e){return""==e||null==e?"空":e},parseTime:l["a"],submitForm:function(e){this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1}))},handleUpdate:function(e){var t=this,a=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;null!=a.ruleForm.birthday&&""!=a.ruleForm.birthday&&(a.ruleForm.birthday=a.parseTime(a.ruleForm.birthday,"{y}-{m}-{d}")),a.updateUser(t.ruleForm.userid)}))},resetForm:function(e){this.$refs[e].resetFields()},closeDialog:function(){console.log("调用打印"),this.clearReqdata("ruleForm")},findProject:function(){console.log("打印reqdata"),console.log(this.reqData),this.getUsers()},clearReqdata:function(e){this.reqData.userid="",this.reqData.nickname="",this.disabled=!1,this.$refs[e].clearValidate()},restProject:function(){this.clearReqdata("ruleForm")},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.reqData.pageSize=e},handleCurrentChange:function(e){console.log("当前页: ".concat(e))},handleChange:function(e){console.log("打印子组件传递的"),console.log(e)},userDeatil:function(e){var t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t=this,a.next=3,regeneratorRuntime.awrap(c(e).then((function(e){console.log(e),t.ruleForm=e.data.data,console.log(t.ruleForm)})));case 3:case"end":return a.stop()}}),null,this)},updateUser:function(e){var t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t=this,a.next=3,regeneratorRuntime.awrap(d(this.ruleForm,e).then((function(e){console.log(e),e.data.success&&(t.$message({message:e.data.msg,type:"success"}),t.clearReqdata("ruleForm"),t.disabled=!1,t.getUsers(),t.dialogVisible=!1)})));case 3:case"end":return a.stop()}}),null,this)},deleteUser:function(e){var t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t=this,a.next=3,regeneratorRuntime.awrap(u(e).then((function(e){console.log(e);var a=e.data;a.success&&(t.$message.success(a.msg),t.getUsers())})));case 3:case"end":return a.stop()}}),null,this)},getUsers:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,this.loading=!0,console.log(this.reqData),t.next=5,regeneratorRuntime.awrap(i(this.reqData).then((function(t){console.log(t),e.tableData=t.data.list,e.total=parseInt(t.pageCount),e.loading=!1})).catch((function(){e.loading=!1})));case 5:case"end":return t.stop()}}),null,this)},handleDetail:function(e,t){this.disabled=!0,this.userDeatil(t.userid),this.dialogVisible=!0},handleEdit:function(e,t){this.disabled=!1,this.dialogVisible=!0,this.userDeatil(t.userid)},handleDelete:function(e,t){var a=this;console.log(e,t);var r=this;console.log("删除"),this.ruleForm={},this.$confirm("此操作将删除该公告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.deleteUser(t.userid)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleImageAdded:function(e,t,a,r){var n;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:return this,n=new FormData,n.append("file",e),l.next=5,regeneratorRuntime.awrap(myaxios.upload(n).then((function(e){var n=e.data;console.log(n);var l=e.data.url;t.insertEmbed(a,"image",l),r()})));case 5:case"end":return l.stop()}}),null,this)}},created:function(){this.getUsers()},components:{VueEditor:s["a"]}},f=m,h=(a("75e0"),a("2877")),g=Object(h["a"])(f,r,n,!1,null,"4d4deabd",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-7de117c8.c7282419.js.map